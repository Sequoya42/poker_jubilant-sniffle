webpackJsonp([8],{"+2R4":function(e,n){e.exports={chooseWinner:function(e,n){var t=n.players,r=e.winners.map(function(n){return{index:n,pot:e.separatePot[n]}});r.sort(function(e,n){return e.pot>n.pot}),r.map(function(n,a){var s=0;e.separatePot=e.separatePot.map(function(t){return s+=e.separatePot[n.index]<t?e.separatePot[n.index]:t,(t-=e.separatePot[n.index])<0&&(t=0),t});var l=a;for(e.pot-=s,amount=s/(r.length-a);l<r.length;)t[r[l].index].stack+=amount,t[r[l].index].allIn=!1,r[l].pot-=e.separatePot[n.index],l++}),e.pot<=0&&(e.pot=0,e.end=!1,e.separatePot=[0]),e.winners=[]},getMoneyBack:function(e,n){e.separatePot.forEach(function(e,t){return n[t].stack+=e}),e.end=!1},endGame:function(e){return e.end=!0},oneWin:function(e,n){return e.oneWin=n.name},playerOneDeals:function(e){return e.dealer=-1},updateLast:function(e,n){e.lastOne=n},addWinner:function(e,n){e.winners.includes(n)?e.winners.splice(e.winners.indexOf(n),1):e.winners.push(n)},updateAmount:function(e,n){e.betAmount=n.amount},nextPlayer:function(e,n){var t=n.nextPos;e.currentPlayerPos=t},fold:function(e,n){var t=n.player;n.pos,n.lastOne;t.folded=!0,e.playersInHand-=1},follow:function(e,n){var t=n.pos,r=n.player,a=n.amount-r.bet;a>=r.stack&&(a=r.stack),e.separatePot.splice(t,1,e.separatePot[t]+a),r.bet+=a,e.pot+=a,r.stack-=a},bet:function(e,n){var t=n.pos,r=n.player,a=n.amount,s=(n.type,r.bet,a-r.bet);s>=r.stack&&(s=r.stack),e.separatePot.splice(t,1,e.separatePot[t]+s),r.bet+=s,e.pot+=s,r.stack-=s},allIn:function(e,n){n.allIn=!0},nextCard:function(e,n){e.cards+=n.cards,n.players.map(function(e){return e.bet=0}),e.lastOne=n.lastOne,e.currentPlayerPos=n.firstOne},clearPlayer:function(e,n){n.map(function(e,n){e.folded=e.stack<=0&&(e.lost=!0),e.allIn=!1,e.stack=Math.round(e.stack),e.bet=0})},listActions:function(e,n){e.listActions.push(n.player.name+" "+n.type+" "+("bet"===n.type?n.amount:""))},newHand:function(e,n){var t=n.players,r=n.numberOfPlayers,a=n.smallBlind,s=n.position;function l(n,r){t[n].bet+=r,t[n].stack-=r,e.separatePot[n]=r}function o(e,n,t){l(n,2*a),l(e,a)}e.playersInHand=t.filter(function(e){return!e.lost}).length,e.dealer=s.dealer,e.cards=0,e.lastOne=s.big,e.currentPlayerPos=s.first,e.betAmount=2*a,e.separatePot=Array(r).fill(0),2===e.playersInHand?(e.currentPlayerPos=s.dealer,e.lastOne=s.small,o(s.big,s.small,e.playersInHand)):o(s.small,s.big,e.playersInHand),e.pot=3*a,e.listActions=[],e.oneWin=!1,e.end=!1}}},"/9OD":function(e,n){},"6vT6":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("v-snackbar",{attrs:{timeout:2e3,top:!0},model:{value:e.snackbar,callback:function(n){e.snackbar=n},expression:"snackbar"}},[t("p",[t("b",[e._v(e._s(e.winner))]),e._v(" won the hand\n    ")]),e._v(" "),t("v-btn",{staticClass:"blue--text",attrs:{flat:""},nativeOn:{click:function(n){e.snackbar=!1}}},[e._v("Close")])],1)],1)},staticRenderFns:[]};var a=t("VU/8")({props:["winner"],name:"popup",data:function(){return{snackbar:!1}},watch:{winner:function(e){this.snackbar=e}},computed:{},methods:{},components:{}},r,!1,function(e){t("/9OD")},null,null);n.default=a.exports},"7zck":function(e,n){},DhmA:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("7+uW"),a=t("NYxO"),s=t("3EgV"),l=t.n(s),o={name:"app",components:{TheHeader:function(){return t.e(5).then(t.bind(null,"BVEk"))}}},i={render:function(){var e=this.$createElement,n=this._self._c||e;return n("v-app",{attrs:{dark:""}},[n("TheHeader"),this._v(" "),n("router-view",{attrs:{app:""}})],1)},staticRenderFns:[]};var c=t("VU/8")(o,i,!1,function(e){t("qNsQ")},null,null).exports,u=(t("6vT6"),t("/ocq")),p={render:function(){var e=this.$createElement,n=this._self._c||e;return n("v-container",{staticClass:"home",attrs:{fluid:""}},[this._v("\n  Have cards and no poker chips? Play with cards in your hands, and bet on the computer.\n  "),n("div",{staticClass:"centerStuff"},[n("router-link",{attrs:{to:{name:"Settings"}}},[n("v-btn",[this._v("\n        Settings\n      ")])],1)],1)])},staticRenderFns:[]};var d=t("VU/8")({name:"home",data:function(){return{msg:"Welcome to Your Vue.js App"}}},p,!1,function(e){t("DhmA")},"data-v-38ffc81f",null).exports,f=t("Dd8w"),m=t.n(f),y={name:"play",beforeMount:function(){this.$store.commit("setPlayersStack"),this.$store.commit("playerOneDeals"),this.$store.dispatch("new_hand")},data:function(){return{showStack:!0,snackbar:!1}},watch:{oneWin:function(){console.log("Changed",this.oneWin),this.snackbar=this.oneWin}},computed:m()({},Object(a.c)(["end","players","reset","separatePot","oneWin"])),methods:{},components:{playerStack:function(){return t.e(1).then(t.bind(null,"1WXH"))},pokerTable:function(){return t.e(3).then(t.bind(null,"HgHf"))},chooseWinner:function(){return t.e(4).then(t.bind(null,"KuC0"))},playerAction:function(){return t.e(2).then(t.bind(null,"nMLK"))},resetGame:function(){return t.e(6).then(t.bind(null,"Jy7u"))},listActions:function(){return t.e(0).then(t.bind(null,"ZdR1"))},popup:function(){return new Promise(function(e){e()}).then(t.bind(null,"6vT6"))}}},h={render:function(){var e=this.$createElement,n=this._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("listActions"),this._v(" "),n("popup",{attrs:{winner:this.oneWin}}),this._v(" "),n("pokerTable"),this._v(" "),n("v-container",{staticClass:"choices"},[this.reset?n("resetGame"):this.end?n("chooseWinner"):n("playerAction")],1)],1)},staticRenderFns:[]};var P=t("VU/8")(y,h,!1,function(e){t("RyhH")},null,null).exports,v=t("DAYN"),b={name:"playerSettings",components:{draggable:t.n(v).a},computed:{players:{get:function(){return this.$store.getters.players},set:function(e){this.$store.commit("updatePlayersOrders",e)}}},methods:m()({},Object(a.b)(["change_name"]))},g={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h4",[e._v("Players names")]),e._v(" "),t("draggable",{model:{value:e.players,callback:function(n){e.players=n},expression:"players"}},e._l(e.players,function(n,r){return t("div",{key:r},[t("v-text-field",{attrs:{type:"text",value:n.name},on:{input:function(n){e.change_name({$event:n,index:r})}}})],1)}))],1)},staticRenderFns:[]};var k=t("VU/8")(b,g,!1,function(e){t("qdIK")},null,null).exports,_={name:"settings",computed:m()({},Object(a.c)(["smallBlind","bigBlind","stack","nPlayers"])),methods:m()({},Object(a.d)(["setBigBlind","setSmallBlind","setStack","setPlayers","setPlayersStack"])),watch:{smallBlind:function(){this.smallBlind>=this.stack/2&&this.setStack(3*this.stack)}},components:{playerSettings:k}},x={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"game"},[t("v-container",[t("v-text-field",{attrs:{label:"Money Stack",type:"number",min:"10",max:"50000",value:e.stack,"prepend-icon":"account_balance"},on:{input:e.setStack}}),e._v(" "),t("v-text-field",{attrs:{label:"People",type:"number",min:"2",max:"5",value:e.nPlayers,"prepend-icon":"people"},on:{input:e.setPlayers}}),e._v(" "),t("v-text-field",{attrs:{label:"small Blind",min:"1",max:"1000",type:"number",value:e.smallBlind,"prepend-icon":"attach_money"},on:{input:e.setSmallBlind}}),e._v(" "),t("v-text-field",{attrs:{label:"big Blind",value:e.bigBlind,"prepend-icon":"attach_money",disabled:""}})],1),e._v(" "),e.nPlayers>1?t("div",{attrs:{id:"players"}},[t("playerSettings")],1):e._e(),e._v(" "),t("v-container",[t("router-link",{attrs:{to:{name:"Game"}}},[t("v-btn",[e._v("\n        Start Game\n      ")])],1)],1)],1)},staticRenderFns:[]};var O=t("VU/8")(_,x,!1,function(e){t("zMh0")},"data-v-e1b27092",null).exports;r.a.use(u.a);var w=new u.a({routes:[{path:"/description",name:"Description",component:d},{path:"/",name:"Game",component:P},{path:"/settings",name:"Settings",component:O}]}),B={state:{end:!1,listActions:[],oneWin:!1,cards:0,playersInHand:0,currentPlayerPos:1,pot:0,separatePot:[],winners:[],lastOne:0,dealer:-1,betAmount:0},getters:{separatePot:function(e){return e.separatePot},listActions:function(e){return e.listActions},winners:function(e){return e.winners},oneWin:function(e){return e.oneWin},dealer:function(e){return e.dealer},pot:function(e){return e.pot},lastOne:function(e){return e.lastOne},end:function(e){return e.end},betAmount:function(e){return e.betAmount},cards:function(e){return e.cards},playersInHand:function(e){return e.playersInHand},currentPlayerPos:function(e){return e.currentPlayerPos},currentPlayer:function(e,n){return n.players[e.currentPlayerPos]},nextPlayerPos:function(e,n){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=(t="player"===t?e.currentPlayerPos:t)%n.nPlayers;r;){var s=0;for(a=(a+1)%n.nPlayers;(n.players[a].lost||n.players[a].folded||n.players[a].allIn)&&s++<50;)a=(a+1)%n.nPlayers;51==s&&(a=n.players.findIndex(function(e){return e.allIn})),r--}return a}},prevPlayerPos:function(e,n){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=0===(t="player"===t?e.currentPlayerPos:t)?n.nPlayers-1:t-1;r;){for(var s=0;s++<50&&(n.players[a].lost||n.players[a].folded||n.players[a].allIn);)a=0===a?n.nPlayers-1:a-1;r--}return a}},changeLast:function(e,n){return function(e){return"bet"==e||"allIn"==e&&1==n.players.filter(function(e){return e.bet>=n.currentPlayer.bet}).length}}},actions:t("e95W"),mutations:t("+2R4")},A=function(e){return{name:"player_"+(e+1),stack:0,index:e,bet:0,folded:!1,lost:!1,allIn:!1}},I={state:{stack:500,reset:!1,numberOfPlayers:5,players:function(e){for(var n=[],t=0;e--;)n.push(A(t++));return n}(5),smallBlind:10,bigBlind:20},getters:{reset:function(e){return e.reset},stack:function(e){return e.stack},nPlayers:function(e){return e.numberOfPlayers},smallBlind:function(e){return e.smallBlind},bigBlind:function(e){return e.bigBlind},players:function(e){return e.players}},actions:{update_players:function(e,n){return(0,e.commit)("updatePlayersOrders",n)},reset_game:function(e){var n=e.commit,t=e.dispatch;return n("resetGame"),n("setPlayersStack"),t("new_hand")},change_name:function(e,n){var t=e.commit,r=e.getters,a=n.$event;r.players.some(function(e){return e.name===a})&&(n.$event+="_2"),t("changeName",n)}},mutations:{setStack:function(e,n){return e.stack=+n},reset:function(e){return e.reset=!e.reset},setSmallBlind:function(e,n){e.smallBlind=+n,e.bigBlind=2*+n},setBigBlind:function(e,n){return e.bigBlind=n},setPlayers:function(e,n){n>0&&(n>e.numberOfPlayers?e.players.splice(n,1,A("Player_"+(+e.numberOfPlayers+1))):n<e.numberOfPlayers&&e.players.splice(n,+(e.numberOfPlayers-n)),e.numberOfPlayers=+n)},resetGame:function(e,n){e.players=e.players.map(function(n,t){return{name:"Player_"+(+t+1),stack:e.stack,bet:0,folded:!1,lost:!1}}),e.reset=!1},setPlayersStack:function(e){e.players.forEach(function(n){n.stack=e.stack,n.bet=0,n.folded=!1,n.lost=!1})},updatePlayersOrders:function(e,n){e.players=n},changeName:function(e,n){e.players[n.index].name=n.$event}}};r.a.use(a.a);var W=new a.a.Store({strict:!0,state:{},modules:{game:B,settings:I}});r.a.config.productionTip=!1,t("7zck"),r.a.use(a.a),r.a.use(l.a,{theme:{primary:"#232b2b",secondary:"#33673B"}}),new r.a({el:"#app",router:w,store:W,template:"<App/>",components:{App:c}})},RyhH:function(e,n){},e95W:function(e,n){e.exports={chooseWinner:function(e){var n=e.state,t=e.dispatch,r=e.commit,a=e.getters;return n.winners.length&&r("chooseWinner",{players:a.players}),1!==a.players.filter(function(e){return e.stack>a.smallBlind}).length||n.pot?n.separatePot.every(function(e,n,t){return 0===e})?t("new_hand"):void 0:(r("reset"),t("new_hand"))},update_amount:function(e,n){e.state;var t=e.commit;e.getters;t("updateAmount",{amount:n})},next_card:function(e){var n=e.commit,t=e.state,r=e.getters;if(5===t.cards)n("endGame");else{if(r.players.filter(function(e){return!e.folded&&!e.allIn}).length<2)return n("endGame");n("nextCard",{cards:0===t.cards?3:1,players:r.players,smallBlind:r.bigBlind,lastOne:r.prevPlayerPos(t.dealer+1),firstOne:r.nextPlayerPos(t.dealer)}),n("updateAmount",{amount:r.bigBlind,nPlayers:r.nPlayers})}},next_player:function(e,n){var t=e.dispatch,r=e.commit,a=e.state,s=e.getters,l=s.nextPlayerPos();return s.players.filter(function(e){return!e.folded}).length<2?(setTimeout(function(){return r("oneWin",s.players[l])},300),r("addWinner",l),t("chooseWinner")):s.players.filter(function(e){return!e.folded&&!e.allIn}).length?void(a.currentPlayerPos===a.lastOne?t("next_card"):r("nextPlayer",{nextPos:l})):r("endGame")},all_in:function(e){var n=e.commit;e.state;n("allIn",e.getters.currentPlayer)},next_action:function(e,n){var t=e.dispatch,r=e.commit,a=(e.state,e.getters),s=a.currentPlayer,l=a.currentPlayerPos,o=n.amount;return r("listActions",{player:s,pos:l,amount:o,type:n.type}),"fold"===n.type?r("fold",{player:s,pos:l,lastOne:a.nextPlayerPos(l)}):"follow"==n.type?r("follow",{player:s,pos:l,amount:o}):"bet"!=n.type&&"allIn"!=n.type||r("bet",{player:s,pos:l,amount:o}),a.changeLast(n.type)&&r("updateLast",a.prevPlayerPos()),a.players.filter(function(e){return!e.folded||!e.allIn}).length?t("next_player"):r("endGame")},new_hand:function(e,n){var t=e.commit,r=e.getters,a=r.dealer;t("clearPlayer",r.players),t("newHand",{players:r.players,numberOfPlayers:r.nPlayers,smallBlind:r.smallBlind,position:{dealer:r.nextPlayerPos(a),small:r.nextPlayerPos(a,2),big:r.nextPlayerPos(a,3),first:r.nextPlayerPos(a,4)}})}}},qNsQ:function(e,n){},qdIK:function(e,n){},zMh0:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.85f668a5cb75ff073029.js.map